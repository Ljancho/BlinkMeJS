// BlinkMe JavaScript library v1.1
// (c) Iliyan Trifonov - http://www.iliyan-trifonov.com/
// Project Url: https://github.com/iliyan-trifonov/BlinkMeJS
// License: MIT (http://www.opensource.org/licenses/mit-license.php)
(function(){function e(t){if(false===this instanceof e){return new e(t)}if(typeof t=="undefined"||typeof t.id=="undefined"||typeof t.colors=="undefined"&&typeof t["class"]=="undefined"&&typeof t.classes=="undefined"||typeof t.colors!="undefined"&&(typeof t.colors.normal=="undefined"||typeof t.colors.blinked=="undefined")||typeof t.classes!="undefined"&&(typeof t.classes.normal=="undefined"||typeof t.classes.blinked=="undefined")){alert("Blinking.js: Please provide the required params (id ''/['','',..], colors {normal: '', blinked: ''} or classes {normal: '', blinked: ''})!");return false}if(typeof t.interval=="undefined")t.interval=500;if(typeof t.autostart=="undefined")t.autostart=true;if(typeof t.start_on_load=="undefined")t.start_on_load=true;if(typeof t.callback_normal=="undefined")t.callback_normal=false;if(typeof t.callback_blinked=="undefined")t.callback_blinked=false;if(typeof t.id!="object"){t.id=[t.id]}this.params=t;this.classes=!!t["class"]||!!t.classes&&(!!t.classes.normal||!!t.classes.blinked);if(!!t["class"]){t.classes={normal:t["class"]}}this.text_timer=null;this.blinked=false;this.els=[];if(!this.params.autostart||!this.params.start_on_load){this.oldonload=window.onload;window.onload=function(){if(typeof this.oldonload=="function")this.oldonload();this.init.call(this)}.bind(this)}if(!!this.params.autostart&&!!this.params.start_on_load){this.oldonload=window.onload;window.onload=function(){if(typeof this.oldonload=="function")this.oldonload();this.init.call(this);this.start_blink.call(this)}.bind(this)}else if(!!this.params.autostart){this.start_blink()}return this}if(!Function.prototype.bind){Function.prototype.bind=function(e){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};r.prototype=this.prototype;i.prototype=new r;return i}}e.prototype.blink=function(){var e=this.blinked;for(var t=0;t<this.els.length;t++){var n=this.els[t];if(!this.blinked){if(!!this.classes){this.manageClass(n,this.params.classes.normal,"remove");this.manageClass(n,this.params.classes.blinked,"add")}else n.style.color=this.params.colors.blinked;if(t==this.params.id.length-1)this.blinked=true}else{if(!!this.classes){this.manageClass(n,this.params.classes.blinked,"remove");this.manageClass(n,this.params.classes.normal,"add")}else n.style.color=this.params.colors.normal;if(t==this.params.id.length-1)this.blinked=false}}if(!!this.params.callback_normal&&!!e&&!this.blinked)this.params.callback_normal(this);if(!!this.params.callback_blinked&&!e&&!!this.blinked)this.params.callback_blinked(this)};e.prototype.start_blink=function(){this.text_timer=setInterval(this.blink.bind(this),this.params.interval)};e.prototype.hasClassList=function(){var e=document.createElement("div");return typeof e.classList!="undefined"}();e.prototype.init=function(){var e=null;var t=new Array;for(var n=0;n<this.params.id.length;n++){if(typeof this.params.id[n]=="undefined"){continue}e=document.getElementById(this.params.id[n]);if(!e){continue}this.els=this.els.concat(e);t[t.length]=this.params.id[n];if(!!this.classes){this.manageClass(e,this.params.classes.normal,"add")}else{e.style.color=this.params.colors.normal}}this.params.id=t};e.prototype.manageClass=function(e,t,n){if(this.hasClassList){if(n=="add")e.classList.add(t);else if(n=="remove")e.classList.remove(t)}else{var r=new RegExp("\\b"+t+"\\b","g");if(n=="add"){if(!e.className.match(r))e.className+=" "+t}else if(n=="remove"){if(!!e.className.match(r))e.className=e.className.replace(r,"")}}};e.prototype.stop_blink=function(){clearInterval(this.text_timer);this.blinked=false;for(var e=0;e<this.params.id.length;e++){var t=document.getElementById(this.params.id[e]);if(!!this.classes){this.manageClass(t,this.params.classes.blinked,"remove");this.manageClass(t,this.params.classes.normal,"add")}else t.style.color=this.params.colors.normal}};window.BlinkMe=e})()