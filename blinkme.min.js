// BlinkMe JavaScript library v1.0
// (c) Iliyan Trifonov - http://www.iliyan-trifonov.com/
// Project Url: https://github.com/iliyan-trifonov/BlinkMeJS
// License: MIT (http://www.opensource.org/licenses/mit-license.php)
!function(){function s(a){return!1==this instanceof s?new s(a):"undefined"==typeof a||"undefined"==typeof a.id||"undefined"==typeof a.colors&&"undefined"==typeof a.class&&"undefined"==typeof a.classes||"undefined"!=typeof a.colors&&("undefined"==typeof a.colors.normal||"undefined"==typeof a.colors.blinked)||"undefined"!=typeof a.classes&&("undefined"==typeof a.classes.normal||"undefined"==typeof a.classes.blinked)?(alert("Blinking.js: Please provide the required params (id ''/['','',..], colors {normal: '', blinked: ''} or classes {normal: '', blinked: ''})!"),!1):("undefined"==typeof a.interval&&(a.interval=500),"undefined"==typeof a.autostart&&(a.autostart=!0),"undefined"==typeof a.start_on_load&&(a.start_on_load=!0),"undefined"==typeof a.callback_normal&&(a.callback_normal=!1),"undefined"==typeof a.callback_blinked&&(a.callback_blinked=!1),"object"!=typeof a.id&&(a.id=[a.id]),this.params=a,this.classes=!!(a.class||a.classes&&(a.classes.normal||a.classes.blinked)),a.class&&(a.classes={normal:a.class}),this.text_timer=null,this.blinked=!1,this.els=[],this.params.autostart&&this.params.start_on_load||(this.oldonload=window.onload,window.onload=function(){"function"==typeof this.oldonload&&this.oldonload(),this.init.call(this)}.bind(this)),this.params.autostart&&this.params.start_on_load?(this.oldonload=window.onload,window.onload=function(){"function"==typeof this.oldonload&&this.oldonload(),this.init.call(this),this.start_blink.call(this)}.bind(this)):this.params.autostart&&this.start_blink(),this)}s.prototype.blink=function(){for(var s=this.blinked,a=0;a<this.els.length;a++){var t=this.els[a];this.blinked?(this.classes?(this.manageClass(t,this.params.classes.blinked,"remove"),this.manageClass(t,this.params.classes.normal,"add")):t.style.color=this.params.colors.normal,a==this.params.id.length-1&&(this.blinked=!1)):(this.classes?(this.manageClass(t,this.params.classes.normal,"remove"),this.manageClass(t,this.params.classes.blinked,"add")):t.style.color=this.params.colors.blinked,a==this.params.id.length-1&&(this.blinked=!0))}this.params.callback_normal&&s&&!this.blinked&&this.params.callback_normal(this),this.params.callback_blinked&&!s&&this.blinked&&this.params.callback_blinked(this)},s.prototype.start_blink=function(){this.text_timer=setInterval(this.blink.bind(this),this.params.interval)},s.prototype.hasClassList=function(){var s=document.createElement("div");return"undefined"!=typeof s.classList}(),s.prototype.init=function(){for(var s=null,a=new Array,t=0;t<this.params.id.length;t++)"undefined"!=typeof this.params.id[t]&&(s=document.getElementById(this.params.id[t]),s&&(this.els=this.els.concat(s),a[a.length]=this.params.id[t],this.classes?this.manageClass(s,this.params.classes.normal,"add"):s.style.color=this.params.colors.normal));this.params.id=a},s.prototype.manageClass=function(s,a,t){if(this.hasClassList)"add"==t?s.classList.add(a):"remove"==t&&s.classList.remove(a);else{var e=new RegExp("\\b"+a+"\\b","g");"add"==t?s.className.match(e)||(s.className+=" "+a):"remove"==t&&s.className.match(e)&&(s.className=s.className.replace(e,""))}},s.prototype.stop_blink=function(){clearInterval(this.text_timer),this.blinked=!1;for(var s=0;s<this.params.id.length;s++){var a=document.getElementById(this.params.id[s]);this.classes?(this.manageClass(a,this.params.classes.blinked,"remove"),this.manageClass(a,this.params.classes.normal,"add")):a.style.color=this.params.colors.normal}},window.BlinkMe=s}();